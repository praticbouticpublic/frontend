@if (loadingState) {
  <div class="center">
    <mat-spinner></mat-spinner>
  </div>
}

@if (!loadingState) {
  <mat-card>
    <mat-card-content>
      <form [formGroup]="settingsFormGroup" (submit)="onSubmit()">
        <mat-form-field>
          <mat-label>Sujet du courriel :</mat-label>
          <input matInput id="subjectmailid" formControlName="subjectmail" type="text" class="fieldparam" (keyup)="flagAsModified()" />
        </mat-form-field>
        <section>
          <mat-checkbox id="validationsmsid" formControlName="validationsms" class="fieldparam" (change)="flagAsModified()" labelPosition="before">Validation des commandes par SMS</mat-checkbox>
        </section>
        <section>
          <mat-checkbox id="verifcpid" formControlName="verifcp" class="fieldparam" (change)="flagAsModified()" labelPosition="before">Vérification des codes postaux :</mat-checkbox>
        </section>
        <br>
          <mat-form-field>
            <mat-label>Choix de paiement :</mat-label>
            <mat-select id="choixpaiementid" formControlName="choixpaiement" class="fieldparam" (selectionChange)="flagAsModified()">
              <mat-option value='COMPTANT'>En ligne par CB</mat-option>
              <mat-option value='LIVRAISON'>En direct par vos moyens</mat-option>
              <mat-option value='TOUS'>En ligne & En direct</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field>
            <mat-label position="floating">Texte du paiement comptant :</mat-label>
            <input matInput id="mpcomptantid" formControlName="mpcomptant" class="fieldparam" type="text" (keyup)="flagAsModified()" />
          </mat-form-field>
          <mat-form-field>
            <mat-label>Texte du paiement à la livraison :</mat-label>
            <input matInput id="mplivraisonid" formControlName="mplivraison" class="fieldparam" type="text" (keyup)="flagAsModified()" />
          </mat-form-field>
          <mat-form-field>
            <mat-label position="floating">Choix de la méthode :</mat-label>
            <mat-select id="choixmethodid" formControlName="choixmethod" class="fieldparam" (selectionChange)="flagAsModified()" >
              <mat-option value="EMPORTER">Emporter</mat-option>
              <mat-option value='LIVRER'>Livrer</mat-option>
              <mat-option value='TOUS'>Emporter & Livrer</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field>
            <mat-label>Texte de la vente à la livraison :</mat-label>
            <input matInput id="cmlivrerid" formControlName="cmlivrer" type="text" class="fieldparam" (keyup)="flagAsModified()" />
          </mat-form-field>
          <mat-form-field>
            <mat-label>Texte de la vente à emporter :</mat-label>
            <input matInput id="cmemporterid" formControlName="cmemporter" class="fieldparam" type="text" (keyup)="flagAsModified()" />
          </mat-form-field>
          <mat-form-field>
            <mat-label>Minimum commande :</mat-label>
            <input matInput id="mntmincmdid" formControlName="mntmincmd" class="fieldparam" type="number" min="0" step="0.01" (keyup)="flagAsModified()" required />
            <mat-error>Un montant minimun supérieur ou égale à zéro est requis</mat-error>
          </mat-form-field>
          <mat-form-field>
            <mat-label>Tailles des images :</mat-label>
            <mat-select id="sizeimgid" formControlName="sizeimg" class="fieldparam" (selectionChange)="flagAsModified()">
              <mat-option value="smallimg">Petites</mat-option>
              <mat-option value="bigimg">Grandes</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field>
            <mat-label>Système de paiement :</mat-label>
            <mat-select id="moneysystemid" formControlName="moneysystem" class="fieldparam" (selectionChange)="flagAsModified()">
              <mat-option value="STRIPE MARKETPLACE">STRIPE</mat-option>
            </mat-select>
          </mat-form-field>
          <div>
            <button mat-fab color="warn" aria-label="Annuler les modifications" style="float:left" (click)="cancelUpdates()" [disabled]="!modified">
              <mat-icon>cancel</mat-icon>
            </button>
          </div>
          <div>
            <button mat-fab color="primary" aria-label="Enregistrer les modifications" style="float:right" type="submit" [disabled]="!modified">
              <mat-icon>done</mat-icon>
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  }
  <br>
    <br>
      <br>
